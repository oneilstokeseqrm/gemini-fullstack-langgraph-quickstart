# Required
GEMINI_API_KEY=

# Optional - LangSmith tracing
LANGSMITH_API_KEY=

# Infrastructure overrides (for cloud deployment)
# When set, these override the default local container connections
REDIS_URI=
POSTGRES_URI=

# =============================================================================
# API Rate Limiting & Throttle Protection (Optional)
# =============================================================================
# These control how the enrichment agent handles Gemini API rate limits.
# Default values are production-safe. Adjust only if you have higher quotas.

# Maximum concurrent enrichment runs (default: 1)
# Serializes requests to avoid burst throttling
MAX_CONCURRENT_RUNS=1

# Maximum parallel web research calls per run (default: 1)
# Controls fanout to prevent burst throttling
MAX_PARALLEL_SEARCHES=1

# Number of initial search queries to generate (default: 1)
# Lower values reduce API calls per run
DEFAULT_INITIAL_QUERIES=1

# Maximum research loops before finalizing (default: 1)
# Lower values reduce API calls per run
DEFAULT_MAX_LOOPS=1

# Retry configuration for 429/throttle errors
MAX_API_RETRIES=5
INITIAL_BACKOFF_SECONDS=2.0
MAX_BACKOFF_SECONDS=60.0

# =============================================================================
# Forced Error Testing (dev/test only)
# =============================================================================
# FORCE_THROTTLE_NODE: Simulate throttle (429) errors for testing.
# Values: generate_query, web_research, reflection, finalize_answer
# Leave empty/unset for normal operation.
# FORCE_THROTTLE_NODE=generate_query

# FORCE_ERROR_NODE: Simulate non-throttle exceptions for testing ENRICHMENT_FAILED path.
# Values: web_research, reflection
# Leave empty/unset for normal operation.
# FORCE_ERROR_NODE=web_research

# FORCE_NO_SOURCES: Simulate zero sources in finalize_answer for testing.
# This tests the guard that prevents "success" when no evidence was gathered.
# Values: 1, true, yes
# Leave empty/unset for normal operation.
# FORCE_NO_SOURCES=1
